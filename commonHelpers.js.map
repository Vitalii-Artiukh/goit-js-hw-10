{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst dateInputEl = document.querySelector('#datetime-picker');\nconst btnStartTimer = document.querySelector('.input-button > button');\nconst deyTimer = document.querySelector('span[data-days]');\nconst hoursTimer = document.querySelector('span[data-hours]');\nconst minutesTimer = document.querySelector('span[data-minutes]');\nconst secondsTimer = document.querySelector('span[data-seconds]');\n\nbtnStartTimer.addEventListener('click', startTimer);\n\nbtnStartTimer.disabled = true;\n\nlet userSelectedDate = 0;\nlet timeForTimer = 0;\n\n///////////////  flatpickr  //////////////////////////\n// const options = {\n//   enableTime: true,\n//   time_24hr: true,\n//   defaultDate: new Date(),\n//   minuteIncrement: 1,\n//   onClose(selectedDates) {\n//     console.log(selectedDates[0]);\n//   },\n// };\n\n///////////////  flatpickr  //////////////////////////\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    timeForTimer = selectedDates[0].getTime() - Date.now();\n    if (timeForTimer < 0) {\n      btnStartTimer.disabled = true;\n\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        messageColor: '#ffffff', // text\n        backgroundColor: 'red',\n        close: false,\n        closeOnEscape: true,\n        position: 'topRight',\n        timeout: 3000,\n      });\n      return;\n    }\n\n    btnStartTimer.disabled = false;\n    userSelectedDate = selectedDates[0];\n  },\n});\n\nfunction startTimer(event) {\n  dateInputEl.disabled = true;\n  btnStartTimer.disabled = true;\n  console.log(userSelectedDate);\n\n  const timerId = setInterval(() => {\n    const time = Date.now();\n    const diffTime = userSelectedDate - time;\n    console.log(diffTime);\n\n    if (Math.floor(diffTime / 1000) === 0) {\n      clearInterval(timerId);\n      dateInputEl.disabled = false;\n\n      iziToast.show({\n        title: 'Success',\n        message: 'Timer is FINISH',\n        messageColor: '#f7f7f7',\n        titleColor: '#f6f6f6',\n        backgroundColor: 'green',\n        close: false,\n        closeOnEscape: true,\n        position: 'topRight',\n        timeout: 3000,\n      });\n    }\n\n    const dataTime = convertMs(diffTime);\n\n    deyTimer.textContent = String(dataTime.days).padStart(2, '0');\n    hoursTimer.textContent = String(dataTime.hours).padStart(2, '0');\n    minutesTimer.textContent = String(dataTime.minutes).padStart(2, '0');\n    secondsTimer.textContent = String(dataTime.seconds).padStart(2, '0');\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["dateInputEl","btnStartTimer","deyTimer","hoursTimer","minutesTimer","secondsTimer","startTimer","userSelectedDate","timeForTimer","flatpickr","selectedDates","iziToast","event","timerId","time","diffTime","dataTime","convertMs","ms","days","hours","minutes","seconds"],"mappings":"+IAMA,MAAMA,EAAc,SAAS,cAAc,kBAAkB,EACvDC,EAAgB,SAAS,cAAc,wBAAwB,EAC/DC,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAEhEJ,EAAc,iBAAiB,QAASK,CAAU,EAElDL,EAAc,SAAW,GAEzB,IAAIM,EAAmB,EACnBC,EAAe,EAenBC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAErB,GADAF,EAAeE,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,MAC7CF,EAAe,EAAG,CACpBP,EAAc,SAAW,GAEzBU,EAAS,MAAM,CACb,QAAS,qCACT,aAAc,UACd,gBAAiB,MACjB,MAAO,GACP,cAAe,GACf,SAAU,WACV,QAAS,GACjB,CAAO,EACD,MACD,CAEDV,EAAc,SAAW,GACzBM,EAAmBG,EAAc,CAAC,CACnC,CACH,CAAC,EAED,SAASJ,EAAWM,EAAO,CACzBZ,EAAY,SAAW,GACvBC,EAAc,SAAW,GACzB,QAAQ,IAAIM,CAAgB,EAE5B,MAAMM,EAAU,YAAY,IAAM,CAChC,MAAMC,EAAO,KAAK,MACZC,EAAWR,EAAmBO,EACpC,QAAQ,IAAIC,CAAQ,EAEhB,KAAK,MAAMA,EAAW,GAAI,IAAM,IAClC,cAAcF,CAAO,EACrBb,EAAY,SAAW,GAEvBW,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,kBACT,aAAc,UACd,WAAY,UACZ,gBAAiB,QACjB,MAAO,GACP,cAAe,GACf,SAAU,WACV,QAAS,GACjB,CAAO,GAGH,MAAMK,EAAWC,EAAUF,CAAQ,EAEnCb,EAAS,YAAc,OAAOc,EAAS,IAAI,EAAE,SAAS,EAAG,GAAG,EAC5Db,EAAW,YAAc,OAAOa,EAAS,KAAK,EAAE,SAAS,EAAG,GAAG,EAC/DZ,EAAa,YAAc,OAAOY,EAAS,OAAO,EAAE,SAAS,EAAG,GAAG,EACnEX,EAAa,YAAc,OAAOW,EAAS,OAAO,EAAE,SAAS,EAAG,GAAG,CACpE,EAAE,GAAI,CACT,CAEA,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}